# LDAP Configuration YAML
displayName: "LDAP"
icon: |
  PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjguOTAzMiAxMy4zNjg4TDEwLjIwMzIgMzQuNDI4QzguODI1NiAzNS45NzkyIDkuMTY5NiAzOC4zOTUyIDEwLjkyNCAzOS41MDE2TDMwLjEwMTYgNTEuNTkxMkMzMS4xOTY4IDUyLjI4MTYgMzIuNTkwNCA1Mi4yODE2IDMzLjY4NDggNTEuNTkxMkw1Mi44NjI0IDM5LjUwMTZDNTQuNjE2OCAzOC4zOTUyIDU0Ljk2IDM1Ljk3OTIgNTMuNTgzMiAzNC40MjhMMzQuODg0OCAxMy4zNjg4QzMzLjI5MzYgMTEuNTc2OCAzMC40OTQ0IDExLjU3NjggMjguOTAyNCAxMy4zNjg4SDI4LjkwMzJaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMTYyNV80MCkiLz4KPHBhdGggZD0iTTQyLjYxMzYgMzUuMDRMMjcuMzI4IDQ0Ljc2NzJDMjQuODQxNiA0Ni4zNDk2IDIxLjY2NDggNDYuMzUxMiAxOS4xNzYgNDQuNzcyOEwxMC44NCAzOS40ODMyQzkuMDg4MDEgMzguMzcxMiA4Ljc1MjAxIDM1Ljk1MjggMTAuMTM2IDM0LjQwNjRMMjguOTM4NCAxMy4yOTQ0QzMwLjQ2OTYgMTEuNTgyNCAzMy4zMTEyIDExLjU4ODggMzQuODM0NCAxMy4zMDcyTDQxLjI1MzYgMjAuNTZDNDEuMjUzNiAyMC41NiAzNi4xMzM2IDE3LjkyIDMxLjg5MzYgMjIuNzJMNDIuNjEzNiAzNS4wNFoiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcl8xNjI1XzQwKSIvPgo8cGF0aCBkPSJNMzEuODkzNiAyMi43MkwyMS4xNzM2IDM1LjA0TDMxLjg5MzYgNDEuNzZMNDIuNjEzNiAzNS4wNEwzMS44OTM2IDIyLjcyWiIgZmlsbD0idXJsKCNwYWludDJfbGluZWFyXzE2MjVfNDApIi8+CjxtYXNrIGlkPSJtYXNrMF8xNjI1XzQwIiBzdHlsZT0ibWFzay10eXBlOmx1bWluYW5jZSIgbWFza1VuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iOSIgeT0iMTIiIHdpZHRoPSI0NiIgaGVpZ2h0PSI0MSI+CjxwYXRoIGQ9Ik0yOC45MDMyIDEzLjM2ODhMMTAuMjAzMiAzNC40MjhDOC44MjU2IDM1Ljk3OTIgOS4xNjk2IDM4LjM5NTIgMTAuOTI0IDM5LjUwMTZMMzAuMTAxNiA1MS41OTEyQzMxLjE5NjggNTIuMjgxNiAzMi41OTA0IDUyLjI4MTYgMzMuNjg0OCA1MS41OTEyTDUyLjg2MjQgMzkuNTAxNkM1NC42MTY4IDM4LjM5NTIgNTQuOTYgMzUuOTc5MiA1My41ODMyIDM0LjQyOEwzNC44ODQ4IDEzLjM2ODhDMzMuMjkzNiAxMS41NzY4IDMwLjQ5NDQgMTEuNTc2OCAyOC45MDI0IDEzLjM2ODhIMjguOTAzMloiIGZpbGw9IndoaXRlIi8+CjwvbWFzaz4KPGcgbWFzaz0idXJsKCNtYXNrMF8xNjI1XzQwKSI+CjxwYXRoIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTptdWx0aXBseSIgZD0iTTMxLjg5MzYgNTIuNzJWOS45Mkw1Ni4yMTM2IDM3LjQ0TDMxLjg5MzYgNTIuNzJaIiBmaWxsPSJ1cmwoI3BhaW50M19saW5lYXJfMTYyNV80MCkiLz4KPC9nPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzE2MjVfNDAiIHgxPSI5LjM1NTIiIHkxPSIzMi4wNjY0IiB4Mj0iNTQuNDMyIiB5Mj0iMzIuMDY2NCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMjI1MDg3Ii8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAzNEVBRiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXJfMTYyNV80MCIgeDE9IjkuMjgwMDEiIHkxPSIyOC45ODQ4IiB4Mj0iNDIuNjEzNiIgeTI9IjI4Ljk4NDgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzY5REVGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMxREE2RTgiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyXzE2MjVfNDAiIHgxPSIzMS44OTM2IiB5MT0iMjIuNzIiIHgyPSIzMS44OTM2IiB5Mj0iNDEuNzYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzhDRUFGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM1RERGRkEiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDNfbGluZWFyXzE2MjVfNDAiIHgxPSIyNS43ODg4IiB5MT0iMTMuNDQ0OCIgeDI9IjQ0LjMyMjQiIHkyPSI0NS41NDQ4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3Atb3BhY2l0eT0iMC4xIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1vcGFjaXR5PSIwLjIiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4=
description: "LDAP as a System of Record"
hostname: "{{Input Required: test.data.com}}"
defaultSyncFrequency: HOURLY
defaultSyncMinInterval: 1
defaultApiCallFrequency: SECONDLY
defaultApiCallMinInterval: 1
type: "LDAP-1.0.0"
# Example Config:
# {
#   "baseDN":"dc=org,dc=example,dc=io",
#   "certificateChain": ". . . base64 encoded certificate chain here . . "
#   "entityConfig": {
#     "<EntityName-1>": {
#       "query": "(&(objectCategory=user)(objectClass=user)(distinguishedName=*))"
#     },
#     "<EntityName-2>": {
#       "query": "(&(objectCategory=group)(objectClass=group)(distinguishedName=*))"
#     },
#     "<EntityName-3>": {
#       "memberOf": <EntityName-2>,
#       "query": "(&(memberOf={{CollectionId}})(objectCategory=user)(objectClass=user))",
#       "memberUniqueIdAttribute": "memberObjectGUID",
#       "memberOfUniqueIdAttribute": "groupObjectGUID"
#     }
#   },
# }

# Adapter Config Field Info:
# [Required] baseDN (String): Specifies the Base Distinguished Name (DN) for the LDAP directory.

# [Required] certificateChain (String): Contains the Base64 encoded certificate chain for secure communication with the LDAP server.

# [Optional] entityConfig (Object): Configurations for different types of entities within the LDAP directory.

# For more information on LDAP queries: https://ldap.com/ldap-filters/

# [Optional] entityConfig.<EntityName> (Object): Configuration for a specific type of entity.
# [Optional] entityConfig.<EntityName>.query (String): Specifies the LDAP query for retrieving entities of this type.

# [Optional] entityConfig.<EntityName>.memberOf (String): Specifies the group or entity to which the members belong.
# [Optional] entityConfig.<EntityName>.query (String): Specifies the LDAP query for retrieving entities of this type.
# [Optional] entityConfig.<EntityName>.memberUniqueIdAttribute (String): Specifies the attribute used as a unique identifier for members.
# [Optional] entityConfig.<EntityName>.memberOfUniqueIdAttribute (String): Specifies the attribute used as a unique identifier for the group or parent entity.


adapterConfig: "ewogICAgImJhc2VETiI6ICJ7e0lucHV0IFJlcXVpcmVkOiBCYXNlRE59fSIsCiAgICAiY2VydGlmaWNhdGVDaGFpbiI6ICJ7e0lucHV0IFJlcXVpcmVkOiBJZiBMREFQUyBpcyBlbmFibGVkOiBiYXNlNjQgZW5jb2RlZCBjZXJ0aWZpY2F0ZUNoYWlufX0iCn0="
# All auth mechanisms specified below must be supported by the specified Adapter.
auth:
  - basic:
      username: "{{Input Required: Username}}"
      password: "{{Input Required: Password}}"
entities:
  # Reference for Active Directory Schema
  # See: https://learn.microsoft.com/en-us/windows/win32/adschema/active-directory-schema
  <EntityName-1>:
    displayName: <EntityName-1>
    externalId: <EntityName-1>
    description: An entity representing <EntityName-1> in an LDAP
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: objectGUID
        externalId: objectGUID
        description: The objectGUID of the User
        type: String
        indexed: true
        uniqueId: true
        attributeAlias: userGUID
      - name: dn
        externalId: dn
        description: The Distinguished Name (DN) of the user
        type: String
      - name: objectClass
        externalId: objectClass
        type: String
        list: true    
  <EntityName-2>:
    description: "An entity representing a <EntityName-2> in an Active Directory"
    displayName: <EntityName-2>
    externalId: <EntityName-2>
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: objectGUID
        externalId: objectGUID
        description: The objectGUID of the Group
        type: String
        indexed: true
        uniqueId: true
        attributeAlias: groupGUID
      - name: dn
        externalId: dn
        description: The Distinguished Name (DN) of the group
        type: String
  <EntityName-3>:
    description: "<EntityName-3> Entity in LDAP"
    displayName: <EntityName-3>
    externalId: <EntityName-3>
    pageSize: 100
    pagesOrderedById: false
    attributes:
      - name: objectGUID
        externalId: objectGUID
        type: String
        indexed: true
        uniqueId: true
      - name: groupObjectGUID
        externalId: groupObjectGUID
        type: String
        indexed: true
      - name: memberObjectGUID
        externalId: memberObjectGUID
        type: String
        indexed: true

relationships:
  UserMember:
    name: Member
    displayName: User Member
    fromAttribute: <EntityName-3>.memberObjectGUID
    toAttribute: userGUID
  GroupMember:
    name: Member
    displayName: Group Member
    fromAttribute: <EntityName-3>.memberObjectGUID
    toAttribute: groupGUID
  MemberOf:
    name: MemberOf
    displayName: Member Of
    fromAttribute: <EntityName-3>.groupObjectGUID
    toAttribute: groupGUID
  UserMemberGroup:
    name: Group
    displayName: User Member Group
    path:
      - relationship: UserMember
        direction: Backward
      - relationship: MemberOf
        direction: Forward
  GroupMemberGroup:
    name: Group
    displayName: Group Member Group
    path:
      - relationship: GroupMember
        direction: Backward
      - relationship: MemberOf
        direction: Forward
